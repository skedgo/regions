{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://region-registry.skedgo.com/region.schema.json",
  "title": "Region",
  "description": "Region specification",
  "type": "object",
  "properties": {
    "code": {
      "description": "Code details for this region.",
      "type": "object",
      "properties": {
        "countryCode": {
          "description": "A valid ISO 3166-1 alpha-2 code.",
          "type": "string"
        },
        "subdivisionCode": {
          "description": "A valid ISO 3166-2 code.",
          "type": "string"
        },
        "cityName": {
          "description": "Name of City. Main city if this region covers multiple cities.",
          "type": "string"
        }
      },
      "required": [ "countryCode", "cityName" ]
    },
    "timezone": {
      "description": "A Java valid time zone id.",
      "type": "string"
    },
    "locale": {
      "description": "Locale information",
      "type": "object",
      "properties": {
        "language": {
          "description": "An ISO 639 alpha-2 or alpha-3 language code, or a language subtag up to 8 characters in length.",
          "type": "string"
        },
        "country": {
          "description": "An ISO 3166 alpha-2 country code or a UN M.49 numeric-3 area code.",
          "type": "string"
        }
      },
      "required": [ "language", "country" ]
    },
    "coverage": {
      "description": "Coverage details.",
      "type": "object",
      "properties": {
        "cities": {
          "description": "List of cities that this region contains.",
          "type": "array",
          "items": { "$ref": "#/$defs/city" }
        },
        "polygon": {
          "$ref": "https://geojson.org/schema/Polygon.json",
          "additionalProperties": false
        }
      },
      "required": [ "cities", "polygon" ]
    },
    "currency": {
      "description": "Details of the currency used in this region.",
      "type": "object",
      "properties": {
        "code": {
          "description": "The ISO 4217 currency code of this currency.",
          "type": "string"
        }
      },
      "required": [ "code" ]
    }, 
    "measurementSystem": {
      "description": "Measurement system to use in this region.",
      "enum": ["metric", "imperial"],
      "default": "metric"
    }, 
    "trafficRule": {
      "description": "Traffic side on the road to keep to.",
      "enum": ["left", "right"]
    },
    "feeds": {
      "description": "Set of public transport feeds for this region",
      "type": "array",
      "items": {
        "type": "string"
      },
      "minItems": 1,
      "uniqueItems": true
    }
  },
  "required": [ "code", "timezone", "locale", "coverage", "currency" , "trafficRule"],
  "$defs": {
    "city": {
      "type": "object",
      "properties": {
        "lat": {
          "description": "Latitude coordinate.",
          "type": "number",
          "minimum": -90,
          "maximum": 90
        },
        "lng": {
          "description": "Longitude coordinate.",
          "type": "number",
          "minimum": -180,
          "maximum": 180
        },
        "address": {
          "description": "Name of this location.",
          "type": "string"
        }
      },
      "required": [ "lat", "lng", "address" ]
    }
  }
}
